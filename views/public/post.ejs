<%- include('../partials/header') %>

<article class="post">
  <p class="meta"><%= formatDate(post.publishedAt || post.createdAt) %> ・ <%= estimateReadTime(post.content) %></p>
  <h1 class="display"><%= post.title %></h1>
  <p class="lead"><%= post.excerpt %></p>
  <% if (post.coverImagePath) { %>
    <img class="post-cover" src="<%= post.coverImagePath %>" alt="<%= post.title %>" />
  <% } %>
  <div class="post-body"><%- post.content %></div>
  <div class="tag-row">
    <a class="tag" href="/category/<%= post.category?.slug %>"><%= post.category?.name || 'General' %></a>
    <% post.tags.forEach(function(tag) { %>
      <a class="tag" href="/tag/<%= encodeURIComponent(tag) %>">#<%= tag %></a>
    <% }) %>
  </div>
  <div class="share">
    <p class="meta">Share</p>
    <div class="share-links">
      <a class="text-link" href="https://twitter.com/intent/tweet?url=<%= baseUrl %>/blog/<%= post.slug %>" target="_blank" rel="noreferrer">Twitter</a>
      <a class="text-link" href="https://www.linkedin.com/sharing/share-offsite/?url=<%= baseUrl %>/blog/<%= post.slug %>" target="_blank" rel="noreferrer">LinkedIn</a>
    </div>
  </div>
</article>

<section class="section">
  <div class="section-head">
    <h2 class="section-title">Related posts</h2>
  </div>
  <div class="post-grid">
    <% related.forEach(function(item) { %>
      <a class="card-min" href="/blog/<%= item.slug %>">
        <p class="meta"><%= formatDate(item.publishedAt || item.createdAt) %></p>
        <p class="title-md"><%= item.title %></p>
      </a>
    <% }) %>
    <% if (!related.length) { %>
      <p class="muted">No related posts yet.</p>
    <% } %>
  </div>
</section>

<%- include('../partials/footer') %>

